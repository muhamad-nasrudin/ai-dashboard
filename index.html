<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NexGen AI Studio Pro | Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #070910; --card: rgba(22, 28, 45, 0.6); --cyan: #22d3ee; }
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background: radial-gradient(circle at 0% 0%, #1e1b4b 0%, #070910 50%); 
            color: white; min-height: 100vh;
        }
        
        .sticky-header { position: sticky; top: 0; z-index: 50; backdrop-filter: blur(20px); background: rgba(7, 9, 16, 0.7); border-bottom: 1px solid rgba(255,255,255,0.05); }

        .card-menu { 
            background: var(--card); backdrop-filter: blur(15px);
            border-radius: 2.2rem; border: 1px solid rgba(255,255,255,0.08); 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .card-menu:active { transform: scale(0.94); background: rgba(22, 28, 45, 0.9); }
        
        .icon-box { 
            width: 52px; height: 52px; border-radius: 1.2rem; 
            display: flex; align-items: center; justify-content: center; font-size: 1.4rem; 
        }

        /* Glow Styles */
        .glow-cyan { background: rgba(34, 211, 238, 0.1); color: var(--cyan); box-shadow: 0 0 20px rgba(34, 211, 238, 0.15); }
        .glow-amber { background: rgba(245, 158, 11, 0.1); color: #fbbf24; box-shadow: 0 0 20px rgba(245, 158, 11, 0.15); }
        .glow-indigo { background: rgba(99, 102, 241, 0.1); color: #818cf8; box-shadow: 0 0 20px rgba(99, 102, 241, 0.15); }
        
        .comparison-wrapper { position: relative; width: 100%; border-radius: 2.8rem; overflow: hidden; aspect-ratio: 1/1; background: #000; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
        .img-comp-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 10; border-right: 2px solid var(--cyan); }
        .img-comp-overlay img { width: 100%; height: 100%; object-fit: contain; }
        .img-after { width: 100%; height: 100%; object-fit: contain; display: block; }
        
        #comp-slider { position: absolute; -webkit-appearance: none; appearance: none; width: 100%; height: 100%; background: transparent; z-index: 20; top: 0; margin: 0; cursor: col-resize; }
        #comp-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 44px; height: 44px; background: white; border: 8px solid var(--bg); border-radius: 50%; box-shadow: 0 0 15px rgba(0,0,0,0.5); }

        .btn-main { 
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); 
            border-radius: 2rem; transition: all 0.3s;
        }
        .btn-main:hover { filter: brightness(1.1); box-shadow: 0 0 25px rgba(6, 182, 212, 0.4); }

        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide { animation: slideIn 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards; }
    </style>
</head>
<body class="pb-12">

    <header class="sticky-header px-8 py-6 flex justify-between items-center mb-8">
        <div>
            <h1 class="text-2xl font-800 tracking-tighter text-white">NexGen <span class="text-cyan-400">AI</span></h1>
            <p class="text-[9px] text-gray-500 font-bold tracking-[0.4em] uppercase">Neural Studio Pro</p>
        </div>
        <div class="relative">
            <div class="absolute -inset-1 bg-cyan-500 rounded-full blur opacity-25"></div>
            <div class="relative w-10 h-10 rounded-2xl bg-gray-900 border border-white/10 flex items-center justify-center">
                <i class="fa-solid fa-microchip text-cyan-400 text-sm"></i>
            </div>
        </div>
    </header>

    <div id="dashboard" class="px-8 grid gap-5 animate-slide">
        <div onclick="openTool('AI Photo Restore', 'e_restore/e_sharpen:100')" class="card-menu p-6 flex items-center gap-5">
            <div class="icon-box glow-amber"><i class="fa-solid fa-sparkles"></i></div>
            <div class="flex-1 text-sm"><h3 class="font-bold text-gray-100">AI Restore</h3><p class="text-[10px] text-gray-500">Perbaiki foto jadul & rusak</p></div>
            <span class="bg-amber-500/10 text-amber-500 text-[8px] px-2 py-1 rounded-full font-bold">HOT</span>
        </div>

        <div onclick="openTool('Super Resolution HD', 'c_limit,w_2500/e_upscale/e_sharpen:50')" class="card-menu p-6 flex items-center gap-5">
            <div class="icon-box glow-cyan"><i class="fa-solid fa-expand"></i></div>
            <div class="flex-1 text-sm"><h3 class="font-bold text-gray-100">Upscale HD+</h3><p class="text-[10px] text-gray-500">Tingkatkan piksel & kejernihan</p></div>
        </div>

        <div onclick="openTool('Background Eraser', 'e_background_removal')" class="card-menu p-6 flex items-center gap-5">
            <div class="icon-box glow-indigo"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
            <div class="flex-1 text-sm"><h3 class="font-bold text-gray-100">Hapus Background</h3><p class="text-[10px] text-gray-500">Auto-masking presisi tinggi</p></div>
        </div>

        <div class="mt-4 grid grid-cols-2 gap-4">
            <div onclick="openTool('Cartoon AI', 'e_cartoonify')" class="card-menu p-5 text-center">
                <i class="fa-solid fa-palette text-purple-400 mb-3 text-xl"></i>
                <h3 class="text-xs font-bold">Cartoon</h3>
            </div>
            <div onclick="openTool('E-Commerce Tool', 'e_background_removal/e_improve')" class="card-menu p-5 text-center">
                <i class="fa-solid fa-camera text-emerald-400 mb-3 text-xl"></i>
                <h3 class="text-xs font-bold">Product</h3>
            </div>
        </div>
    </div>

    <div id="workspace" class="hidden fixed inset-0 bg-[#070910] z-50 p-8 overflow-y-auto">
        <div class="flex justify-between items-center mb-10">
            <button onclick="location.reload()" class="w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center border border-white/10">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            <div class="text-center">
                <h2 id="toolTitle" class="text-sm font-bold uppercase tracking-widest text-cyan-400">Editor</h2>
            </div>
            <div class="w-12"></div>
        </div>

        <div id="uploadArea" class="card-menu p-12 text-center border-2 border-dashed border-cyan-500/20">
            <input type="file" id="fileInput" class="hidden" accept="image/*" onchange="startProcess()">
            <label for="fileInput" class="cursor-pointer">
                <div class="w-20 h-20 bg-cyan-500/5 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-cyan-500/10">
                    <i class="fa-solid fa-plus text-2xl text-cyan-400"></i>
                </div>
                <p class="font-bold">Unggah Gambar</p>
                <p class="text-[10px] text-gray-600 mt-3">Mendukung resolusi hingga 4K</p>
            </label>
        </div>

        <div id="loader" class="hidden text-center py-24">
            <div class="relative w-20 h-20 mx-auto">
                <div class="absolute inset-0 border-4 border-cyan-500/10 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"></div>
            </div>
            <p id="processStep" class="text-[10px] text-gray-500 mt-10 tracking-[0.5em] uppercase font-bold animate-pulse">Neural Engine Processing...</p>
        </div>

        <div id="resultArea" class="hidden animate-slide">
            <div class="comparison-wrapper shadow-2xl">
                <div id="imgOverlay" class="img-comp-overlay" style="clip-path: inset(0 50% 0 0);">
                    <img id="imgOriginal" src="">
                </div>
                <img id="outputImg" class="img-after bg-[url('https://www.transparenttextures.com/patterns/checkerboard.png')]" src="">
                <input type="range" min="0" max="100" value="50" id="comp-slider" oninput="handleSlide()">
            </div>
            
            <div class="flex justify-between items-center mt-6 px-2">
                <span class="text-[9px] text-gray-600 font-bold uppercase tracking-widest">Original</span>
                <span class="text-[9px] text-cyan-500 font-bold uppercase tracking-widest italic">AI Enhanced</span>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mt-10">
                <button onclick="downloadImage()" class="btn-main py-5 font-bold text-xs tracking-widest">
                    SIMPAN PNG
                </button>
                <button onclick="location.reload()" class="bg-white/5 border border-white/10 rounded-[2rem] py-5 font-bold text-xs">
                    BATAL
                </button>
            </div>
        </div>
    </div>

    <script>
        const cloudName = "nasrudin-cloud"; 
        const uploadPreset = "Hapus BG"; 
        let currentEffect = "";

        function openTool(name, effect) {
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('workspace').classList.remove('hidden');
            document.getElementById('toolTitle').innerText = name;
            currentEffect = effect;
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        function handleSlide() {
            const val = document.getElementById('comp-slider').value;
            document.getElementById('imgOverlay').style.clipPath = `inset(0 ${100 - val}% 0 0)`;
        }

        async function startProcess() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files[0]) return;

            const reader = new FileReader();
            reader.onload = (e) => document.getElementById('imgOriginal').src = e.target.result;
            reader.readAsDataURL(fileInput.files[0]);

            document.getElementById('uploadArea').classList.add('hidden');
            document.getElementById('loader').classList.remove('hidden');
            
            const steps = ["Menganalisis Tekstur...", "Menghitung Pencahayaan...", "Merender Hasil Final..."];
            let i = 0;
            const timer = setInterval(() => {
                if(i < steps.length) document.getElementById('processStep').innerText = steps[i++];
                else clearInterval(timer);
            }, 2000);

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            formData.append('upload_preset', uploadPreset);

            try {
                const response = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();

                if (data.secure_url) {
                    const processedUrl = data.secure_url.replace("/upload/", `/upload/${currentEffect}/`);
                    const img = new Image();
                    img.src = processedUrl;
                    img.onload = () => {
                        document.getElementById('outputImg').src = processedUrl;
                        document.getElementById('loader').classList.add('hidden');
                        document.getElementById('resultArea').classList.remove('hidden');
                        if (window.navigator.vibrate) window.navigator.vibrate([20, 50, 20]);
                    };
                }
            } catch (err) {
                alert("Kesalahan Jaringan AI!");
                location.reload();
            }
        }

        async function downloadImage() {
            const imgUrl = document.getElementById('outputImg').src;
            const btn = event.currentTarget;
            btn.innerText = "MENGUNDUH...";
            try {
                const response = await fetch(imgUrl);
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `NexGenAI_Result_${Date.now()}.png`;
                document.body.appendChild(a);
                a.click();
                btn.innerText = "SIMPAN PNG";
            } catch (e) {
                window.open(imgUrl, '_blank');
            }
        }
    </script>
</body>
</html>
